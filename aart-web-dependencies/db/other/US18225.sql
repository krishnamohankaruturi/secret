-- US18225: DLM TEST RESET  
 
UPDATE studentsresponses SET activeflag = false, modifieduser = (SELECT id FROM aartuser WHERE username = 'cetesysadmin'), modifieddate = now()
     WHERE studentstestsid IN (SELECT id FROM studentstests WHERE testsessionid IN (2390581,2389746,2379514, 2379608,2383270, 2383417, 2383538, 2379571, 2383345, 2383456, 2379371, 2379818, 2390954, 2393832, 2379345, 2391414, 2378472, 2378930, 2393687, 2378445, 2379040, 2393683, 2376784, 2393540, 2394226, 2394671, 2397915, 2398109, 2398254, 2393411, 2393582, 2394412, 2394652, 2397989, 2398159));

UPDATE studentstestsections SET activeflag = false,  modifieduser = (SELECT id FROM aartuser WHERE username = 'cetesysadmin'), modifieddate = now()
      WHERE studentstestid IN (SELECT id FROM studentstests WHERE testsessionid IN (2390581,2389746,2379514, 2379608,2383270, 2383417, 2383538, 2379571, 2383345, 2383456, 2379371, 2379818, 2390954, 2393832, 2379345, 2391414, 2378472, 2378930, 2393687, 2378445, 2379040, 2393683, 2376784, 2393540, 2394226, 2394671, 2397915, 2398109, 2398254, 2393411, 2393582, 2394412, 2394652, 2397989, 2398159));

UPDATE studentstests SET activeflag = false, modifieduser = (SELECT id FROM aartuser WHERE username = 'cetesysadmin'), modifieddate = now()
     WHERE testsessionid IN (2390581,2389746,2379514, 2379608,2383270, 2383417, 2383538, 2379571, 2383345, 2383456, 2379371, 2379818, 2390954, 2393832, 2379345, 2391414, 2378472, 2378930, 2393687, 2378445, 2379040, 2393683, 2376784, 2393540, 2394226, 2394671, 2397915, 2398109, 2398254, 2393411, 2393582, 2394412, 2394652, 2397989, 2398159);
                 
UPDATE testsession SET activeflag = false, modifieduser = (SELECT id FROM aartuser WHERE username = 'cetesysadmin'), modifieddate = now()
     WHERE id IN (2390581,2389746,2379514, 2379608,2383270, 2383417, 2383538, 2379571, 2383345, 2383456, 2379371, 2379818, 2390954, 2393832, 2379345, 2391414, 2378472, 2378930, 2393687, 2378445, 2379040, 2393683, 2376784, 2393540, 2394226, 2394671, 2397915, 2398109, 2398254, 2393411, 2393582, 2394412, 2394652, 2397989, 2398159);

UPDATE studenttrackerband SET activeflag = false, modifieddate = now(), modifieduser = (SELECT id FROM aartuser WHERE username = 'cetesysadmin')
     WHERE studenttrackerid in (142914,142917,143740,143746,141921,141920,141923,141922,143743,141979,141978)
       AND testsessionid in (2390581,2389746,2379514, 2379608,2383270, 2383417, 2383538, 2379571, 2383345, 2383456, 2379371, 2379818, 2390954, 2393832, 2379345, 2391414, 2378472, 2378930, 2393687, 2378445, 2379040, 2393683, 2376784, 2393540, 2394226, 2394671, 2397915, 2398109, 2398254, 2393411, 2393582, 2394412, 2394652, 2397989, 2398159);
     
INSERT INTO domainaudithistory (source, objecttype, objectid, createduserid, createddate, action, objectbeforevalues, objectaftervalues)
      values('SCRIPT', 'STUDENTSTESTS', 1146692, 12, now(), 'REST_STUDENT_TRACKER', ('{"TestSessionIds": "2390581,2389746,2379514, 2379608,2383270, 2383417, 2383538, 2379571, 2383345, 2383456, 2379371,2379818, 2390954, 2393832, 2379345, 2391414, 2378472, 2378930, 2393687, 2378445, 2379040, 2393683, 2376784, 2393540, 2394226, 2394671, 2397915, 2398109, 2398254, 2393411, 2393582, 2394412,2394652, 2397989, 2398159", "activeflag": true}')::JSON,  ('{"Reason": "As per US18225, inactivated the students tests"}')::JSON);
    
 
 update studenttracker set status = 'UNTRACKED' where id in (142914,142917,143740,143746,141921,141920,141923,141922,143743,141979,141978);