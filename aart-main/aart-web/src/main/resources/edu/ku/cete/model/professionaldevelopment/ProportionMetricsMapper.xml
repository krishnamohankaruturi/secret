<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.ku.cete.model.professionaldevelopment.ProportionMetricsMapper">
  <resultMap id="BaseResultMap" type="edu.ku.cete.domain.professionaldevelopment.ProportionMetrics">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 22 14:36:57 CST 2014.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="contentareaid" jdbcType="BIGINT" property="contentAreaId" />
    <result column="gradecourseid" jdbcType="BIGINT" property="gradeCourseId" />
    <result column="gradebandid" jdbcType="BIGINT" property="gradeBandId" />
    <result column="linkagelevelid" jdbcType="BIGINT" property="linkageLevelId" />
    <result column="essentialelementid" jdbcType="BIGINT" property="essentialElementId" />
    <result column="essentialelement" jdbcType="VARCHAR" property="essentialElement" />
    <result column="linkagelevelabbr" jdbcType="VARCHAR" property="linkageLevelAbbr" />
    <result column="proportionlow" jdbcType="NUMERIC" property="proportionLow" />
    <result column="proportionhigh" jdbcType="NUMERIC" property="proportionHigh" />
    <result column="createduser" jdbcType="INTEGER" property="createdUser" />
    <result column="createddate" jdbcType="TIMESTAMP" property="createdDate" />
    <result column="modifieduser" jdbcType="INTEGER" property="modifiedUser" />
    <result column="modifieddate" jdbcType="TIMESTAMP" property="modifiedDate" />
    <result column="activeflag" jdbcType="BIT" property="activeFlag" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 22 14:36:57 CST 2014.
    -->
    id, contentareaid, gradecourseid, gradebandid, linkagelevelid, essentialelementid, 
    essentialelement, linkagelevelabbr, proportionlow, proportionhigh, createduser, createddate, 
    modifieduser, modifieddate, activeflag
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 22 14:36:57 CST 2014.
    -->
    select 
    <include refid="Base_Column_List" />
    from proportionmetrics
    where id = #{id,jdbcType=BIGINT}
  </select>
  <insert id="insert" parameterType="edu.ku.cete.domain.professionaldevelopment.ProportionMetrics">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 22 14:36:57 CST 2014.
    -->
    <selectKey keyProperty="id" order="BEFORE" resultType="java.lang.Long">
      SELECT nextval('proportionmetrics_id_seq')
    </selectKey>
    insert into proportionmetrics (id, contentareaid, gradecourseid, 
      gradebandid, linkagelevelid, essentialelementid, 
      essentialelement, linkagelevelabbr, proportionlow, 
      proportionhigh, createduser, createddate, 
      modifieduser, modifieddate, activeflag
      )
    values (#{id,jdbcType=BIGINT}, #{contentAreaId,jdbcType=BIGINT}, #{gradeCourseId,jdbcType=BIGINT}, 
      #{gradeBandId,jdbcType=BIGINT}, #{linkageLevelId,jdbcType=BIGINT}, #{essentialElementId,jdbcType=BIGINT}, 
      #{essentialElement,jdbcType=VARCHAR}, #{linkageLevelAbbr,jdbcType=VARCHAR}, #{proportionLow,jdbcType=NUMERIC}, 
      #{proportionHigh,jdbcType=NUMERIC}, #{createdUser,jdbcType=INTEGER}, #{createdDate,jdbcType=TIMESTAMP}, 
      #{modifiedUser,jdbcType=INTEGER}, #{modifiedDate,jdbcType=TIMESTAMP}, #{activeFlag,jdbcType=BIT}
      )
  </insert>
  <insert id="insertSelective" parameterType="edu.ku.cete.domain.professionaldevelopment.ProportionMetrics">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 22 14:36:57 CST 2014.
    -->
    <selectKey keyProperty="id" order="BEFORE" resultType="java.lang.Long">
      SELECT nextval('proportionmetrics_id_seq')
    </selectKey>
    insert into proportionmetrics
    <trim prefix="(" suffix=")" suffixOverrides=",">
      id,
      <if test="contentAreaId != null">
        contentareaid,
      </if>
      <if test="gradeCourseId != null">
        gradecourseid,
      </if>
      <if test="gradeBandId != null">
        gradebandid,
      </if>
      <if test="linkageLevelId != null">
        linkagelevelid,
      </if>
      <if test="essentialElementId != null">
        essentialelementid,
      </if>
      <if test="essentialElement != null">
        essentialelement,
      </if>
      <if test="linkageLevelAbbr != null">
        linkagelevelabbr,
      </if>
      <if test="proportionLow != null">
        proportionlow,
      </if>
      <if test="proportionHigh != null">
        proportionhigh,
      </if>
      <if test="createdUser != null">
        createduser,
      </if>
      <if test="createdDate != null">
        createddate,
      </if>
      <if test="modifiedUser != null">
        modifieduser,
      </if>
      <if test="modifiedDate != null">
        modifieddate,
      </if>
      <if test="activeFlag != null">
        activeflag,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{id,jdbcType=BIGINT},
      <if test="contentAreaId != null">
        #{contentAreaId,jdbcType=BIGINT},
      </if>
      <if test="gradeCourseId != null">
        #{gradeCourseId,jdbcType=BIGINT},
      </if>
      <if test="gradeBandId != null">
        #{gradeBandId,jdbcType=BIGINT},
      </if>
      <if test="linkageLevelId != null">
        #{linkageLevelId,jdbcType=BIGINT},
      </if>
      <if test="essentialElementId != null">
        #{essentialElementId,jdbcType=BIGINT},
      </if>
      <if test="essentialElement != null">
        #{essentialElement,jdbcType=VARCHAR},
      </if>
      <if test="linkageLevelAbbr != null">
        #{linkageLevelAbbr,jdbcType=VARCHAR},
      </if>
      <if test="proportionLow != null">
        #{proportionLow,jdbcType=NUMERIC},
      </if>
      <if test="proportionHigh != null">
        #{proportionHigh,jdbcType=NUMERIC},
      </if>
      <if test="createdUser != null">
        #{createdUser,jdbcType=INTEGER},
      </if>
      <if test="createdDate != null">
        #{createdDate,jdbcType=TIMESTAMP},
      </if>
      <if test="modifiedUser != null">
        #{modifiedUser,jdbcType=INTEGER},
      </if>
      <if test="modifiedDate != null">
        #{modifiedDate,jdbcType=TIMESTAMP},
      </if>
      <if test="activeFlag != null">
        #{activeFlag,jdbcType=BIT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="edu.ku.cete.domain.professionaldevelopment.ProportionMetrics">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 22 14:36:57 CST 2014.
    -->
    update proportionmetrics
    <set>
      <if test="contentAreaId != null">
        contentareaid = #{contentAreaId,jdbcType=BIGINT},
      </if>
      <if test="gradeCourseId != null">
        gradecourseid = #{gradeCourseId,jdbcType=BIGINT},
      </if>
      <if test="gradeBandId != null">
        gradebandid = #{gradeBandId,jdbcType=BIGINT},
      </if>
      <if test="linkageLevelId != null">
        linkagelevelid = #{linkageLevelId,jdbcType=BIGINT},
      </if>
      <if test="essentialElementId != null">
        essentialelementid = #{essentialElementId,jdbcType=BIGINT},
      </if>
      <if test="essentialElement != null">
        essentialelement = #{essentialElement,jdbcType=VARCHAR},
      </if>
      <if test="linkageLevelAbbr != null">
        linkagelevelabbr = #{linkageLevelAbbr,jdbcType=VARCHAR},
      </if>
      <if test="proportionLow != null">
        proportionlow = #{proportionLow,jdbcType=NUMERIC},
      </if>
      <if test="proportionHigh != null">
        proportionhigh = #{proportionHigh,jdbcType=NUMERIC},
      </if>
      <if test="createdUser != null">
        createduser = #{createdUser,jdbcType=INTEGER},
      </if>
      <if test="createdDate != null">
        createddate = #{createdDate,jdbcType=TIMESTAMP},
      </if>
      <if test="modifiedUser != null">
        modifieduser = #{modifiedUser,jdbcType=INTEGER},
      </if>
      <if test="modifiedDate != null">
        modifieddate = #{modifiedDate,jdbcType=TIMESTAMP},
      </if>
      <if test="activeFlag != null">
        activeflag = #{activeFlag,jdbcType=BIT},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="edu.ku.cete.domain.professionaldevelopment.ProportionMetrics">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 22 14:36:57 CST 2014.
    -->
    update proportionmetrics
    set contentareaid = #{contentAreaId,jdbcType=BIGINT},
      gradecourseid = #{gradeCourseId,jdbcType=BIGINT},
      gradebandid = #{gradeBandId,jdbcType=BIGINT},
      linkagelevelid = #{linkageLevelId,jdbcType=BIGINT},
      essentialelementid = #{essentialElementId,jdbcType=BIGINT},
      essentialelement = #{essentialElement,jdbcType=VARCHAR},
      linkagelevelabbr = #{linkageLevelAbbr,jdbcType=VARCHAR},
      proportionlow = #{proportionLow,jdbcType=NUMERIC},
      proportionhigh = #{proportionHigh,jdbcType=NUMERIC},
      createduser = #{createdUser,jdbcType=INTEGER},
      createddate = #{createdDate,jdbcType=TIMESTAMP},
      modifieduser = #{modifiedUser,jdbcType=INTEGER},
      modifieddate = #{modifiedDate,jdbcType=TIMESTAMP},
      activeflag = #{activeFlag,jdbcType=BIT}
    where id = #{id,jdbcType=BIGINT}
  </update>
  
  <select id="getAllProportionMetricsData" resultMap="BaseResultMap">
    select <include refid="Base_Column_List" /> 
	from proportionmetrics	where activeflag is true						
  </select>
  
   <select id="getAllProportionMetricsByGradeBandEELevel" resultMap="BaseResultMap">
    select <include refid="Base_Column_List" /> 
	from proportionmetrics
	where activeflag is true and essentialelement = #{essentialElement,jdbcType=VARCHAR}
	and linkagelevelabbr = #{linkageLevelAbbr,jdbcType=VARCHAR}
	and gradebandid in (select gradebandid from gradebandgradecourse gbgc
			inner join gradecourse gc on gbgc.gradecourseid=gc.id
			where gc.abbreviatedname = (select abbreviatedname from gradecourse where id=#{gradeId,jdbcType=BIGINT}))							
  </select>
  <select id="getAllProportionMetricsByGradeEELevel" resultMap="BaseResultMap">
    select <include refid="Base_Column_List" /> 
	from proportionmetrics
	where activeflag is true and essentialelement = #{essentialElement,jdbcType=VARCHAR}
	and linkagelevelabbr = #{linkageLevelAbbr,jdbcType=VARCHAR}
	and gradecourseid in (select id from gradecourse gc where gc.abbreviatedname = (select abbreviatedname from gradecourse where id=#{gradeId,jdbcType=BIGINT}))					
  </select>
</mapper>