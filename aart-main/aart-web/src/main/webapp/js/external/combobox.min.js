(function(a){a.widget("ui.combobox",{_create:function(){var d,c=this,b=this.element.hide(),e=b.children(":selected"),f=e.val()?e.text():"",g=a("<span>").addClass("ui-combobox").insertAfter(b);d=a("<input>").appendTo(g).val(f).addClass("ui-state-default").autocomplete({delay:0,minLength:0,source:function(i,h){var j=new RegExp(a.ui.autocomplete.escapeRegex(i.term),"i");h(b.children("option").map(function(){var k=a(this).text();if(this.value&&(!i.term||j.test(k))){return{label:k.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(i.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:k,option:this}}}))},select:function(h,i){i.item.option.selected=true;c._trigger("selected",h,{item:i.item.option});b.trigger("change")},change:function(i,j){if(!j.item){var k=new RegExp("^"+a.ui.autocomplete.escapeRegex(a(this).val())+"$","i"),h=false;b.children("option").each(function(){if(a(this).text().match(k)){this.selected=h=true;return false}});if(!h){a(this).val("");b.val("");d.data("autocomplete").term="";return false}}}}).addClass("ui-widget ui-widget-content ui-corner-left");d.data("autocomplete")._renderItem=function(h,i){return a("<li></li>").data("item.autocomplete",i).append("<a>"+i.label+"</a>").appendTo(h)};a("<a>").attr("tabIndex",-1).attr("title","Show All Items").appendTo(g).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function(){if(d.autocomplete("widget").is(":visible")){d.autocomplete("close");return}a(this).blur();d.autocomplete("search","");d.focus()})},destroy:function(){this.wrapper.remove();this.element.show();a.Widget.prototype.destroy.call(this)}})})(jQuery);$(function(){$("#combobox").combobox();$("#toggle").click(function(){$("#combobox").toggle()})});